<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Cart API Test UI</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 1rem; }
    input, button { padding: .5rem; margin: .25rem 0; }
    .item { border-bottom: 1px solid #ddd; padding: .5rem 0; }
  </style>
</head>
<body>
  <h1>Cart API Test UI</h1>
  <p>Provide a client id (e.g. <code>test-client</code>), add items, and view cart.</p>
  <label>Client ID: <input id="clientId" value="test-client"></label>

  <h2>Add item</h2>
  <label>Product ID: <input id="productId" value="sku-1"></label><br>
  <label>Name: <input id="name" value="T-Shirt"></label><br>
  <label>Price: <input id="price" value="19.99"></label><br>
  <label>Quantity: <input id="quantity" value="1"></label><br>
  <button id="add">Add to cart</button>

  <h2>Actions</h2>
  <button id="view">View Cart</button>
  <button id="clear">Clear Cart</button>

  <h2>Cart</h2>
  <pre id="output">(empty)</pre>

  <script>
    const api = (path, opts = {}) => {
      const client = document.getElementById('clientId').value;
      const url = '/cart' + path + (path.includes('?') ? '&' : '?') + 'client_id=' + encodeURIComponent(client);
      return fetch(url, Object.assign({ headers: { 'Content-Type': 'application/json' } }, opts)).then(r => r.json());
    };

    document.getElementById('add').addEventListener('click', async () => {
      const body = {
        product_id: document.getElementById('productId').value,
        name: document.getElementById('name').value,
        price: parseFloat(document.getElementById('price').value) || 0,
        quantity: parseInt(document.getElementById('quantity').value) || 1,
      };
      const res = await api('/add', { method: 'POST', body: JSON.stringify(body) });
      document.getElementById('output').textContent = JSON.stringify(res, null, 2);
    });

    document.getElementById('view').addEventListener('click', async () => {
      const res = await api('');
      document.getElementById('output').textContent = JSON.stringify(res, null, 2);
    });

    document.getElementById('clear').addEventListener('click', async () => {
      const res = await api('/clear', { method: 'POST' });
      document.getElementById('output').textContent = JSON.stringify(res, null, 2);
    });
  </script>
</body>
</html>
